{
    # Global options
    email barsukov.d@gmail.com
    # Uncomment for staging/testing to avoid Let's Encrypt rate limits
    # acme_ca https://acme-staging-v02.api.letsencrypt.org/directory
}

# Replace with your actual domain
{$DOMAIN:localhost} {
    # Reverse proxy to Vite dev server
    reverse_proxy host.docker.internal:{$VITE_PORT:5173} {
        # WebSocket support for HMR (Hot Module Replacement)
        header_up Upgrade {>Upgrade}
        header_up Connection {>Connection}
    }

    # Enable gzip compression
    encode gzip

    # Logs
    log {
        output file /data/access.log
        format json
    }
}
