basePath: /api/v1
definitions:
  internal_infrastructure_http_handlers.AbandonMarathonRequest:
    properties:
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.AbandonMarathonResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonGameOverResultDTO'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.AbandonSessionRequest:
    properties:
      userId:
        type: string
    required:
    - userId
    type: object
  internal_infrastructure_http_handlers.AdminDeleteGamesResponse:
    properties:
      data:
        properties:
          date:
            type: string
          deleted:
            type: integer
          playerId:
            type: string
        type: object
    type: object
  internal_infrastructure_http_handlers.AdminGameInfo:
    properties:
      attemptNumber:
        type: integer
      baseScore:
        type: integer
      bestStreak:
        type: integer
      chestCoins:
        type: integer
      chestType:
        type: string
      currentStreak:
        type: integer
      date:
        type: string
      id:
        type: string
      lastPlayedDate:
        type: string
      rank:
        type: integer
      status:
        type: string
    type: object
  internal_infrastructure_http_handlers.AdminListGamesResponse:
    properties:
      data:
        properties:
          count:
            type: integer
          games:
            items:
              $ref: '#/definitions/internal_infrastructure_http_handlers.AdminGameInfo'
            type: array
          playerId:
            type: string
        type: object
    type: object
  internal_infrastructure_http_handlers.AdminResetPlayerResponse:
    properties:
      data:
        properties:
          deleted:
            additionalProperties:
              type: integer
            type: object
          playerId:
            type: string
          totalDeleted:
            type: integer
        type: object
    type: object
  internal_infrastructure_http_handlers.AdminSimulateStreakRequest:
    properties:
      baseScore:
        description: default 40
        type: integer
      days:
        description: 1-365
        type: integer
      playerId:
        type: string
    required:
    - days
    - playerId
    type: object
  internal_infrastructure_http_handlers.AdminSimulateStreakResponse:
    properties:
      data:
        properties:
          dateRange:
            properties:
              from:
                type: string
              to:
                type: string
            type: object
          daysCreated:
            type: integer
          playerId:
            type: string
          streakBuilt:
            type: integer
        type: object
    type: object
  internal_infrastructure_http_handlers.AdminUpdateStreakRequest:
    properties:
      bestStreak:
        type: integer
      currentStreak:
        type: integer
      lastPlayedDate:
        description: YYYY-MM-DD
        type: string
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.AdminUpdateStreakResponse:
    properties:
      data:
        properties:
          playerId:
            type: string
          updated:
            type: integer
        type: object
    type: object
  internal_infrastructure_http_handlers.AnswerDTO:
    properties:
      id:
        type: string
      position:
        type: integer
      text:
        type: string
    required:
    - id
    - position
    - text
    type: object
  internal_infrastructure_http_handlers.AnsweredQuestionDTO:
    properties:
      correctAnswerId:
        type: string
      correctAnswerText:
        type: string
      isCorrect:
        type: boolean
      playerAnswerId:
        type: string
      playerAnswerText:
        type: string
      pointsEarned:
        type: integer
      questionId:
        type: string
      questionText:
        type: string
      timeTaken:
        type: integer
    required:
    - correctAnswerId
    - correctAnswerText
    - isCorrect
    - playerAnswerId
    - playerAnswerText
    - pointsEarned
    - questionId
    - questionText
    - timeTaken
    type: object
  internal_infrastructure_http_handlers.CategoryDTO:
    properties:
      id:
        type: string
      name:
        type: string
    required:
    - id
    - name
    type: object
  internal_infrastructure_http_handlers.ChestRewardDTO:
    properties:
      chestType:
        type: string
      coins:
        type: integer
      marathonBonuses:
        items:
          type: string
        type: array
      pvpTickets:
        type: integer
    required:
    - chestType
    - coins
    - marathonBonuses
    - pvpTickets
    type: object
  internal_infrastructure_http_handlers.ContinueMarathonData:
    properties:
      coinsDeducted:
        type: integer
      continueCount:
        type: integer
      game:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonGameDTO'
      nextContinueCost:
        type: integer
    required:
    - coinsDeducted
    - continueCount
    - game
    - nextContinueCost
    type: object
  internal_infrastructure_http_handlers.ContinueMarathonRequest:
    properties:
      paymentMethod:
        description: '"coins" or "ad"'
        type: string
      playerId:
        type: string
    required:
    - paymentMethod
    - playerId
    type: object
  internal_infrastructure_http_handlers.ContinueMarathonResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.ContinueMarathonData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.CreateCategoryData:
    properties:
      category:
        $ref: '#/definitions/internal_infrastructure_http_handlers.CategoryDTO'
    required:
    - category
    type: object
  internal_infrastructure_http_handlers.CreateCategoryRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  internal_infrastructure_http_handlers.CreateCategoryResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.CreateCategoryData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.CreateChallengeLinkRequest:
    properties:
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.CreateChallengeLinkResponse:
    properties:
      data:
        properties:
          challengeLink:
            type: string
          expiresAt:
            type: integer
          shareText:
            type: string
        type: object
    type: object
  internal_infrastructure_http_handlers.DailyGameDTO:
    properties:
      baseScore:
        type: integer
      correctAnswers:
        type: integer
      currentQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      dailyQuizId:
        type: string
      date:
        description: YYYY-MM-DD
        type: string
      finalScore:
        type: integer
      gameId:
        type: string
      playerId:
        type: string
      questionIndex:
        type: integer
      questionTimeRemaining:
        description: Seconds remaining for current question
        type: integer
      rank:
        type: integer
      status:
        description: '"in_progress" | "completed"'
        type: string
      streak:
        $ref: '#/definitions/internal_infrastructure_http_handlers.StreakDTO'
      timeRemaining:
        description: Seconds until daily quiz expires
        type: integer
      totalQuestions:
        type: integer
    required:
    - baseScore
    - correctAnswers
    - dailyQuizId
    - date
    - finalScore
    - gameId
    - playerId
    - questionIndex
    - status
    - streak
    - timeRemaining
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.DailyQuizData:
    properties:
      completionStatus:
        description: '"not_attempted" | "completed"'
        type: string
      quiz:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuizDetailDTO'
      topScores:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.LeaderboardEntryDTO'
        type: array
      userResult:
        $ref: '#/definitions/internal_infrastructure_http_handlers.DailyQuizUserResultDTO'
    required:
    - completionStatus
    - quiz
    - topScores
    type: object
  internal_infrastructure_http_handlers.DailyQuizUserResultDTO:
    properties:
      completedAt:
        type: integer
      rank:
        type: integer
      score:
        type: integer
    required:
    - completedAt
    - rank
    - score
    type: object
  internal_infrastructure_http_handlers.DuelChallengeDTO:
    properties:
      challengeLink:
        type: string
      challengedId:
        type: string
      challengerId:
        type: string
      createdAt:
        type: integer
      expiresAt:
        type: integer
      expiresIn:
        type: integer
      id:
        type: string
      status:
        type: string
      type:
        type: string
    type: object
  internal_infrastructure_http_handlers.DuelFriendDTO:
    properties:
      avatar:
        type: string
      id:
        type: string
      inGame:
        type: boolean
      isOnline:
        type: boolean
      league:
        type: string
      mmr:
        type: integer
      username:
        type: string
    type: object
  internal_infrastructure_http_handlers.DuelPlayerRatingDTO:
    properties:
      canDemote:
        type: boolean
      division:
        type: integer
      gamesAtRank:
        type: integer
      league:
        type: string
      leagueIcon:
        type: string
      leagueLabel:
        type: string
      mmr:
        type: integer
      peakLeague:
        type: string
      peakMmr:
        type: integer
      playerId:
        type: string
      seasonLosses:
        type: integer
      seasonWins:
        type: integer
      winRate:
        type: number
    type: object
  internal_infrastructure_http_handlers.ErrorDetail:
    properties:
      code:
        type: integer
      message:
        type: string
    required:
    - code
    - message
    type: object
  internal_infrastructure_http_handlers.ErrorResponse:
    properties:
      error:
        $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorDetail'
    required:
    - error
    type: object
  internal_infrastructure_http_handlers.FinalResultDTO:
    properties:
      correctCount:
        type: integer
      maxScore:
        type: integer
      passed:
        type: boolean
      percentage:
        type: integer
      questionsCount:
        type: integer
      totalScore:
        type: integer
    required:
    - correctCount
    - maxScore
    - passed
    - percentage
    - questionsCount
    - totalScore
    type: object
  internal_infrastructure_http_handlers.GameHistoryEntryDTO:
    properties:
      completedAt:
        type: integer
      gameId:
        type: string
      isFriendGame:
        type: boolean
      mmrChange:
        type: integer
      opponent:
        type: string
      opponentMmr:
        type: integer
      opponentScore:
        type: integer
      playerScore:
        type: integer
      result:
        type: string
    type: object
  internal_infrastructure_http_handlers.GameResultsDTO:
    properties:
      answeredQuestions:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.AnsweredQuestionDTO'
        type: array
      baseScore:
        type: integer
      chestReward:
        $ref: '#/definitions/internal_infrastructure_http_handlers.ChestRewardDTO'
      correctAnswers:
        type: integer
      currentStreak:
        type: integer
      finalScore:
        type: integer
      leaderboard:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.LeaderboardEntryDTO'
        type: array
      percentile:
        type: integer
      rank:
        type: integer
      streakBonus:
        type: integer
      totalPlayers:
        type: integer
      totalQuestions:
        type: integer
    required:
    - answeredQuestions
    - baseScore
    - chestReward
    - correctAnswers
    - currentStreak
    - finalScore
    - leaderboard
    - percentile
    - rank
    - streakBonus
    - totalPlayers
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.GetActiveSessionData:
    properties:
      currentQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      session:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SessionDTO'
      timeLimit:
        type: integer
      timeLimitPerQuestion:
        type: integer
      totalQuestions:
        type: integer
    required:
    - currentQuestion
    - session
    - timeLimit
    - timeLimitPerQuestion
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.GetActiveSessionRequest:
    properties:
      userId:
        type: string
    required:
    - userId
    type: object
  internal_infrastructure_http_handlers.GetActiveSessionResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetActiveSessionData'
    type: object
  internal_infrastructure_http_handlers.GetDailyLeaderboardData:
    properties:
      date:
        type: string
      entries:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.LeaderboardEntryDTO'
        type: array
      playerRank:
        type: integer
      totalPlayers:
        type: integer
    required:
    - date
    - entries
    - totalPlayers
    type: object
  internal_infrastructure_http_handlers.GetDailyLeaderboardResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetDailyLeaderboardData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetDailyQuizResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.DailyQuizData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetDailyStatusData:
    properties:
      game:
        $ref: '#/definitions/internal_infrastructure_http_handlers.DailyGameDTO'
      hasPlayed:
        type: boolean
      results:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GameResultsDTO'
      timeLimit:
        description: Fixed 15 seconds per question
        type: integer
      timeRemaining:
        description: Seconds remaining for current question (server-side timer)
        type: integer
      timeToExpire:
        description: Seconds until daily quiz expires
        type: integer
      totalPlayers:
        type: integer
    required:
    - hasPlayed
    - timeToExpire
    - totalPlayers
    type: object
  internal_infrastructure_http_handlers.GetDailyStatusResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetDailyStatusData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetDuelStatusResponse:
    properties:
      data:
        properties:
          activeGameId:
            type: string
          friendsOnline:
            items:
              $ref: '#/definitions/internal_infrastructure_http_handlers.DuelFriendDTO'
            type: array
          hasActiveDuel:
            type: boolean
          pendingChallenges:
            items:
              $ref: '#/definitions/internal_infrastructure_http_handlers.DuelChallengeDTO'
            type: array
          player:
            $ref: '#/definitions/internal_infrastructure_http_handlers.DuelPlayerRatingDTO'
          seasonEndsAt:
            type: integer
          seasonId:
            type: string
          tickets:
            type: integer
        type: object
    type: object
  internal_infrastructure_http_handlers.GetGameHistoryResponse:
    properties:
      data:
        properties:
          games:
            items:
              $ref: '#/definitions/internal_infrastructure_http_handlers.GameHistoryEntryDTO'
            type: array
          hasMore:
            type: boolean
          total:
            type: integer
        type: object
    type: object
  internal_infrastructure_http_handlers.GetGlobalLeaderboardResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.GlobalLeaderboardEntryDTO'
        type: array
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetLeaderboardResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.LeaderboardEntryDTO'
        type: array
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetMarathonLeaderboardData:
    properties:
      category:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonCategoryDTO'
      entries:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonLeaderboardEntryDTO'
        type: array
      playerRank:
        type: integer
      timeFrame:
        type: string
    required:
    - category
    - entries
    - timeFrame
    type: object
  internal_infrastructure_http_handlers.GetMarathonLeaderboardResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetMarathonLeaderboardData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetMarathonStatusData:
    properties:
      bonusInventory:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonBonusInventoryDTO'
      game:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonGameDTO'
      hasActiveGame:
        type: boolean
    required:
    - hasActiveGame
    type: object
  internal_infrastructure_http_handlers.GetMarathonStatusResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetMarathonStatusData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetPersonalBestsData:
    properties:
      overallBest:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonPersonalBestDTO'
      personalBests:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonPersonalBestDTO'
        type: array
    required:
    - personalBests
    type: object
  internal_infrastructure_http_handlers.GetPersonalBestsResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetPersonalBestsData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetPlayerStreakData:
    properties:
      canRestore:
        type: boolean
      daysToNext:
        type: integer
      nextMilestone:
        type: integer
      streak:
        $ref: '#/definitions/internal_infrastructure_http_handlers.StreakDTO'
    required:
    - canRestore
    - daysToNext
    - nextMilestone
    - streak
    type: object
  internal_infrastructure_http_handlers.GetPlayerStreakResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetPlayerStreakData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetQuizDetailsData:
    properties:
      quiz:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuizDetailDTO'
      topScores:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.LeaderboardEntryDTO'
        type: array
    required:
    - quiz
    - topScores
    type: object
  internal_infrastructure_http_handlers.GetQuizDetailsResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetQuizDetailsData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetRandomQuizResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GetQuizDetailsData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetSessionResultsResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SessionResultsData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetUserActiveSessionsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.SessionSummaryDTO'
        type: array
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GetUserResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.UserDTO'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.GlobalLeaderboardEntryDTO:
    properties:
      lastActivityAt:
        example: 1674567890
        type: integer
      quizzesCompleted:
        example: 5
        minimum: 0
        type: integer
      rank:
        example: 1
        minimum: 1
        type: integer
      totalScore:
        example: 850
        minimum: 0
        type: integer
      userId:
        example: user123
        type: string
      username:
        example: JohnDoe
        type: string
    required:
    - lastActivityAt
    - quizzesCompleted
    - rank
    - totalScore
    - userId
    - username
    type: object
  internal_infrastructure_http_handlers.JoinQueueRequest:
    properties:
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.JoinQueueResponse:
    properties:
      data:
        properties:
          estimatedWait:
            type: integer
          mmrRange:
            type: string
          position:
            type: integer
          queueId:
            type: string
          status:
            type: string
        type: object
    type: object
  internal_infrastructure_http_handlers.LeaderboardEntryDTO:
    properties:
      completedAt:
        type: integer
      rank:
        type: integer
      score:
        type: integer
      userId:
        type: string
      username:
        type: string
    required:
    - completedAt
    - rank
    - score
    - userId
    - username
    type: object
  internal_infrastructure_http_handlers.LeaveQueueResponse:
    properties:
      data:
        properties:
          newTicketCount:
            type: integer
          success:
            type: boolean
          ticketRefunded:
            type: boolean
        type: object
    type: object
  internal_infrastructure_http_handlers.ListCategoriesResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.CategoryDTO'
        type: array
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.ListQuizzesResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.QuizDTO'
        type: array
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.ListUsersResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.UserDTO'
        type: array
      total:
        type: integer
    required:
    - data
    - total
    type: object
  internal_infrastructure_http_handlers.MarathonBonusInventoryDTO:
    properties:
      fiftyFifty:
        type: integer
      freeze:
        type: integer
      shield:
        type: integer
      skip:
        type: integer
    required:
    - fiftyFifty
    - freeze
    - shield
    - skip
    type: object
  internal_infrastructure_http_handlers.MarathonBonusResultDTO:
    properties:
      hiddenAnswerIds:
        items:
          type: string
        type: array
      newTimeLimit:
        type: integer
      nextQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      nextTimeLimit:
        type: integer
      shieldActive:
        type: boolean
    type: object
  internal_infrastructure_http_handlers.MarathonCategoryDTO:
    properties:
      id:
        type: string
      isAllCategories:
        type: boolean
      name:
        type: string
    required:
    - id
    - isAllCategories
    - name
    type: object
  internal_infrastructure_http_handlers.MarathonContinueOfferDTO:
    properties:
      available:
        type: boolean
      continueCount:
        type: integer
      costCoins:
        type: integer
      hasAd:
        type: boolean
    required:
    - available
    - continueCount
    - costCoins
    - hasAd
    type: object
  internal_infrastructure_http_handlers.MarathonGameDTO:
    properties:
      bonusInventory:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonBonusInventoryDTO'
      category:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonCategoryDTO'
      continueCount:
        type: integer
      currentQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      difficultyLevel:
        type: string
      id:
        type: string
      lives:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonLivesDTO'
      personalBest:
        type: integer
      playerId:
        type: string
      questionNumber:
        type: integer
      score:
        description: Total correct answers
        type: integer
      shieldActive:
        type: boolean
      status:
        description: '"in_progress", "game_over", "completed", "abandoned"'
        type: string
      timeLimit:
        type: integer
      totalQuestions:
        type: integer
    required:
    - bonusInventory
    - category
    - continueCount
    - difficultyLevel
    - id
    - lives
    - playerId
    - questionNumber
    - score
    - shieldActive
    - status
    - timeLimit
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.MarathonGameOverResultDTO:
    properties:
      continueOffer:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonContinueOfferDTO'
      finalScore:
        type: integer
      isNewPersonalBest:
        type: boolean
      previousRecord:
        type: integer
      totalQuestions:
        type: integer
    required:
    - finalScore
    - isNewPersonalBest
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.MarathonLeaderboardEntryDTO:
    properties:
      achievedAt:
        type: integer
      bestScore:
        type: integer
      bestStreak:
        type: integer
      playerId:
        type: string
      rank:
        type: integer
      username:
        type: string
    required:
    - achievedAt
    - bestScore
    - bestStreak
    - playerId
    - rank
    - username
    type: object
  internal_infrastructure_http_handlers.MarathonLivesDTO:
    properties:
      currentLives:
        type: integer
      label:
        description: "\"❤️❤️\U0001F5A4\""
        type: string
      maxLives:
        type: integer
      timeToNextLife:
        type: integer
    required:
    - currentLives
    - label
    - maxLives
    - timeToNextLife
    type: object
  internal_infrastructure_http_handlers.MarathonMilestoneDTO:
    properties:
      current:
        type: integer
      next:
        type: integer
      remaining:
        type: integer
    required:
    - current
    - next
    - remaining
    type: object
  internal_infrastructure_http_handlers.MarathonPersonalBestDTO:
    properties:
      achievedAt:
        type: integer
      bestScore:
        type: integer
      bestStreak:
        type: integer
      category:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonCategoryDTO'
    required:
    - achievedAt
    - bestScore
    - bestStreak
    - category
    type: object
  internal_infrastructure_http_handlers.OpenChestData:
    properties:
      chestType:
        type: string
      premiumApplied:
        type: boolean
      rewards:
        $ref: '#/definitions/internal_infrastructure_http_handlers.ChestRewardDTO'
      streakBonus:
        type: number
    required:
    - chestType
    - premiumApplied
    - rewards
    - streakBonus
    type: object
  internal_infrastructure_http_handlers.OpenChestRequest:
    properties:
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.OpenChestResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.OpenChestData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.QuestionDTO:
    properties:
      answers:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.AnswerDTO'
        type: array
      id:
        type: string
      points:
        type: integer
      position:
        type: integer
      text:
        type: string
    required:
    - answers
    - id
    - points
    - position
    - text
    type: object
  internal_infrastructure_http_handlers.QuizDTO:
    properties:
      categoryId:
        type: string
      createdAt:
        type: integer
      description:
        type: string
      id:
        type: string
      passingScore:
        type: integer
      questionsCount:
        type: integer
      timeLimit:
        type: integer
      title:
        type: string
    required:
    - createdAt
    - id
    - passingScore
    - questionsCount
    - timeLimit
    - title
    type: object
  internal_infrastructure_http_handlers.QuizDetailDTO:
    properties:
      categoryId:
        type: string
      createdAt:
        type: integer
      description:
        type: string
      id:
        type: string
      passingScore:
        type: integer
      questions:
        items:
          $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
        type: array
      timeLimit:
        type: integer
      title:
        type: string
    required:
    - createdAt
    - id
    - passingScore
    - questions
    - timeLimit
    - title
    type: object
  internal_infrastructure_http_handlers.RegisterUserData:
    properties:
      isNewUser:
        type: boolean
      user:
        $ref: '#/definitions/internal_infrastructure_http_handlers.UserDTO'
    required:
    - isNewUser
    - user
    type: object
  internal_infrastructure_http_handlers.RegisterUserResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.RegisterUserData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.RequestRematchRequest:
    properties:
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.RequestRematchResponse:
    properties:
      data:
        properties:
          expiresIn:
            type: integer
          gameId:
            type: string
          rematchId:
            type: string
          status:
            type: string
        type: object
    type: object
  internal_infrastructure_http_handlers.RespondChallengeRequest:
    properties:
      action:
        description: '"accept" or "decline"'
        type: string
      playerId:
        type: string
    required:
    - action
    - playerId
    type: object
  internal_infrastructure_http_handlers.RespondChallengeResponse:
    properties:
      data:
        properties:
          gameId:
            type: string
          startsIn:
            type: integer
          success:
            type: boolean
          ticketConsumed:
            type: boolean
        type: object
    type: object
  internal_infrastructure_http_handlers.RetryChallengeData:
    properties:
      coinsDeducted:
        type: integer
      firstQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      newGameId:
        type: string
      remainingCoins:
        type: integer
      timeLimit:
        type: integer
    required:
    - coinsDeducted
    - firstQuestion
    - newGameId
    - remainingCoins
    - timeLimit
    type: object
  internal_infrastructure_http_handlers.RetryChallengeRequest:
    properties:
      paymentMethod:
        description: '"coins" or "ad"'
        type: string
      playerId:
        type: string
    required:
    - paymentMethod
    - playerId
    type: object
  internal_infrastructure_http_handlers.RetryChallengeResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.RetryChallengeData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.SendChallengeRequest:
    properties:
      friendId:
        type: string
      playerId:
        type: string
    required:
    - friendId
    - playerId
    type: object
  internal_infrastructure_http_handlers.SendChallengeResponse:
    properties:
      data:
        properties:
          challengeId:
            type: string
          expiresIn:
            type: integer
          status:
            type: string
          ticketConsumed:
            type: boolean
        type: object
    type: object
  internal_infrastructure_http_handlers.SessionDTO:
    properties:
      completedAt:
        type: integer
      currentQuestion:
        type: integer
      id:
        type: string
      quizId:
        type: string
      score:
        type: integer
      startedAt:
        type: integer
      status:
        type: string
      userId:
        type: string
    required:
    - currentQuestion
    - id
    - quizId
    - score
    - startedAt
    - status
    - userId
    type: object
  internal_infrastructure_http_handlers.SessionResultsData:
    properties:
      avgAnswerTime:
        description: seconds
        type: number
      correctAnswers:
        type: integer
      longestStreak:
        type: integer
      passed:
        type: boolean
      quiz:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuizDTO'
      scorePercentage:
        description: 0-100
        type: integer
      session:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SessionDTO'
      timeSpent:
        description: seconds
        type: integer
      totalQuestions:
        type: integer
    required:
    - avgAnswerTime
    - correctAnswers
    - longestStreak
    - passed
    - quiz
    - scorePercentage
    - session
    - timeSpent
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.SessionSummaryDTO:
    properties:
      currentQuestion:
        type: integer
      quizId:
        type: string
      quizTitle:
        type: string
      score:
        type: integer
      sessionId:
        type: string
      startedAt:
        type: integer
      totalQuestions:
        type: integer
    required:
    - currentQuestion
    - quizId
    - quizTitle
    - score
    - sessionId
    - startedAt
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.StartDailyChallengeData:
    properties:
      firstQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      game:
        $ref: '#/definitions/internal_infrastructure_http_handlers.DailyGameDTO'
      timeLimit:
        type: integer
      timeToExpire:
        type: integer
      totalPlayers:
        type: integer
    required:
    - firstQuestion
    - game
    - timeLimit
    - timeToExpire
    - totalPlayers
    type: object
  internal_infrastructure_http_handlers.StartDailyChallengeRequest:
    properties:
      date:
        description: YYYY-MM-DD, defaults to today
        type: string
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.StartDailyChallengeResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.StartDailyChallengeData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.StartMarathonData:
    properties:
      game:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonGameDTO'
      hasPersonalBest:
        type: boolean
    required:
    - game
    - hasPersonalBest
    type: object
  internal_infrastructure_http_handlers.StartMarathonRequest:
    properties:
      categoryId:
        type: string
      playerId:
        type: string
    required:
    - playerId
    type: object
  internal_infrastructure_http_handlers.StartMarathonResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.StartMarathonData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.StartQuizData:
    properties:
      firstQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      session:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SessionDTO'
      timeLimit:
        type: integer
      timeLimitPerQuestion:
        type: integer
      totalQuestions:
        type: integer
    required:
    - firstQuestion
    - session
    - timeLimit
    - timeLimitPerQuestion
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.StartQuizRequest:
    properties:
      userId:
        type: string
    required:
    - userId
    type: object
  internal_infrastructure_http_handlers.StartQuizResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.StartQuizData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.StreakDTO:
    properties:
      bestStreak:
        type: integer
      bonusPercent:
        type: integer
      currentStreak:
        type: integer
      isActive:
        type: boolean
      lastPlayedDate:
        description: YYYY-MM-DD
        type: string
    required:
    - bestStreak
    - bonusPercent
    - currentStreak
    - isActive
    - lastPlayedDate
    type: object
  internal_infrastructure_http_handlers.SubmitAnswerData:
    properties:
      basePoints:
        type: integer
      correctAnswerId:
        type: string
      currentStreak:
        type: integer
      finalResult:
        $ref: '#/definitions/internal_infrastructure_http_handlers.FinalResultDTO'
      isCorrect:
        type: boolean
      isQuizCompleted:
        type: boolean
      nextQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      pointsEarned:
        type: integer
      streakBonus:
        type: integer
      timeBonus:
        type: integer
      totalScore:
        type: integer
    required:
    - basePoints
    - correctAnswerId
    - currentStreak
    - isCorrect
    - isQuizCompleted
    - pointsEarned
    - streakBonus
    - timeBonus
    - totalScore
    type: object
  internal_infrastructure_http_handlers.SubmitAnswerRequest:
    properties:
      answerId:
        type: string
      questionId:
        type: string
      timeTaken:
        minimum: 0
        type: integer
      userId:
        type: string
    required:
    - answerId
    - questionId
    - timeTaken
    - userId
    type: object
  internal_infrastructure_http_handlers.SubmitAnswerResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitAnswerData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.SubmitDailyAnswerData:
    properties:
      correctAnswerId:
        type: string
      gameResults:
        $ref: '#/definitions/internal_infrastructure_http_handlers.GameResultsDTO'
      isCorrect:
        type: boolean
      isGameCompleted:
        type: boolean
      nextQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      nextTimeLimit:
        type: integer
      questionIndex:
        type: integer
      remainingQuestions:
        type: integer
      totalQuestions:
        type: integer
    required:
    - correctAnswerId
    - isCorrect
    - isGameCompleted
    - questionIndex
    - remainingQuestions
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.SubmitDailyAnswerRequest:
    properties:
      answerId:
        type: string
      playerId:
        type: string
      questionId:
        type: string
      timeTaken:
        minimum: 0
        type: integer
    required:
    - answerId
    - playerId
    - questionId
    - timeTaken
    type: object
  internal_infrastructure_http_handlers.SubmitDailyAnswerResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitDailyAnswerData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.SubmitMarathonAnswerData:
    properties:
      bonusInventory:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonBonusInventoryDTO'
      correctAnswerId:
        type: string
      difficultyLevel:
        type: string
      gameOverResult:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonGameOverResultDTO'
      isCorrect:
        type: boolean
      isGameOver:
        type: boolean
      lifeLost:
        type: boolean
      lives:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonLivesDTO'
      milestone:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonMilestoneDTO'
      nextQuestion:
        $ref: '#/definitions/internal_infrastructure_http_handlers.QuestionDTO'
      nextTimeLimit:
        type: integer
      score:
        type: integer
      shieldConsumed:
        type: boolean
      timeTaken:
        type: integer
      totalQuestions:
        type: integer
    required:
    - bonusInventory
    - correctAnswerId
    - difficultyLevel
    - isCorrect
    - isGameOver
    - lifeLost
    - lives
    - score
    - shieldConsumed
    - timeTaken
    - totalQuestions
    type: object
  internal_infrastructure_http_handlers.SubmitMarathonAnswerRequest:
    properties:
      answerId:
        type: string
      playerId:
        type: string
      questionId:
        type: string
      timeTaken:
        minimum: 0
        type: integer
    required:
    - answerId
    - playerId
    - questionId
    - timeTaken
    type: object
  internal_infrastructure_http_handlers.SubmitMarathonAnswerResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitMarathonAnswerData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.UpdateUserProfileRequest:
    properties:
      avatarUrl:
        type: string
      email:
        type: string
      languageCode:
        type: string
      telegramUsername:
        type: string
      username:
        type: string
    type: object
  internal_infrastructure_http_handlers.UpdateUserProfileResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.UserDTO'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.UseMarathonBonusData:
    properties:
      bonusInventory:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonBonusInventoryDTO'
      bonusResult:
        $ref: '#/definitions/internal_infrastructure_http_handlers.MarathonBonusResultDTO'
      bonusType:
        type: string
      remainingCount:
        type: integer
    required:
    - bonusInventory
    - bonusResult
    - bonusType
    - remainingCount
    type: object
  internal_infrastructure_http_handlers.UseMarathonBonusRequest:
    properties:
      bonusType:
        description: '"shield", "fifty_fifty", "skip", "freeze"'
        type: string
      playerId:
        type: string
      questionId:
        type: string
    required:
    - bonusType
    - playerId
    - questionId
    type: object
  internal_infrastructure_http_handlers.UseMarathonBonusResponse:
    properties:
      data:
        $ref: '#/definitions/internal_infrastructure_http_handlers.UseMarathonBonusData'
    required:
    - data
    type: object
  internal_infrastructure_http_handlers.UserDTO:
    properties:
      avatarUrl:
        type: string
      createdAt:
        type: integer
      email:
        type: string
      id:
        type: string
      isBlocked:
        type: boolean
      languageCode:
        type: string
      telegramUsername:
        type: string
      updatedAt:
        type: integer
      username:
        type: string
    required:
    - createdAt
    - id
    - isBlocked
    - languageCode
    - updatedAt
    - username
    type: object
host: localhost:3000
info:
  contact:
    email: support@quiz-sprint-tma.online
    name: API Support
    url: https://quiz-sprint-tma.online/support
  description: Quiz Sprint TMA Backend API - A Telegram Mini App for interactive quizzes
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://quiz-sprint-tma.online/terms
  title: Quiz Sprint API
  version: "1.0"
paths:
  /admin/daily-challenge/games:
    delete:
      consumes:
      - application/json
      description: Delete games for a player on a specific date (or all dates)
      parameters:
      - description: Admin API key
        in: header
        name: X-Admin-Key
        required: true
        type: string
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      - description: Date (YYYY-MM-DD). If empty, deletes ALL games
        in: query
        name: date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Deleted
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.AdminDeleteGamesResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Delete player games
      tags:
      - admin
    get:
      description: List all daily games for a player (debug view)
      parameters:
      - description: Admin API key
        in: header
        name: X-Admin-Key
        required: true
        type: string
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      - description: Limit (default 20)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Games list
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.AdminListGamesResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: List player games
      tags:
      - admin
  /admin/daily-challenge/simulate-streak:
    post:
      consumes:
      - application/json
      description: Create fake completed games for N consecutive days to build up
        a streak
      parameters:
      - description: Admin API key
        in: header
        name: X-Admin-Key
        required: true
        type: string
      - description: Simulate request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.AdminSimulateStreakRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Simulated
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.AdminSimulateStreakResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Simulate streak
      tags:
      - admin
  /admin/daily-challenge/streak:
    patch:
      consumes:
      - application/json
      description: Set streak values for testing (updates the latest game for given
        date)
      parameters:
      - description: Admin API key
        in: header
        name: X-Admin-Key
        required: true
        type: string
      - description: Streak update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.AdminUpdateStreakRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.AdminUpdateStreakResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: No game found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Update player streak
      tags:
      - admin
  /admin/player/reset:
    delete:
      description: 'Delete ALL player data: daily games, marathon games, personal
        bests, quiz sessions, user stats. User profile is preserved.'
      parameters:
      - description: Admin API key
        in: header
        name: X-Admin-Key
        required: true
        type: string
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Reset complete
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.AdminResetPlayerResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Full player reset
      tags:
      - admin
  /categories:
    get:
      consumes:
      - application/json
      description: Get a list of all available quiz categories
      produces:
      - application/json
      responses:
        "200":
          description: List of categories
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ListCategoriesResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: List all categories
      tags:
      - category
    post:
      consumes:
      - application/json
      description: Create a new quiz category
      parameters:
      - description: Category data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.CreateCategoryRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Category created
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.CreateCategoryResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Create a new category
      tags:
      - category
  /daily-challenge/{gameId}/answer:
    post:
      consumes:
      - application/json
      description: Submit answer for current question (no immediate feedback)
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Submit request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitDailyAnswerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Answer submitted
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitDailyAnswerResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Submit answer
      tags:
      - daily-challenge
  /daily-challenge/{gameId}/chest/open:
    post:
      consumes:
      - application/json
      description: Get chest rewards (idempotent)
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Open chest request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.OpenChestRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Chest opened
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.OpenChestResponse'
        "400":
          description: Game not completed
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Open chest
      tags:
      - daily-challenge
  /daily-challenge/{gameId}/retry:
    post:
      consumes:
      - application/json
      description: Create second attempt (costs 100 coins or ad)
      parameters:
      - description: Original Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Retry request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.RetryChallengeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Retry started
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.RetryChallengeResponse'
        "400":
          description: Invalid request or insufficient coins
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Retry limit reached
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Retry challenge
      tags:
      - daily-challenge
  /daily-challenge/leaderboard:
    get:
      consumes:
      - application/json
      description: Get daily challenge leaderboard for a specific date
      parameters:
      - description: Date (YYYY-MM-DD, defaults to today)
        in: query
        name: date
        type: string
      - description: Limit (default 10, max 100)
        in: query
        name: limit
        type: integer
      - description: Player ID (to get rank)
        in: query
        name: playerId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Leaderboard
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetDailyLeaderboardResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get leaderboard
      tags:
      - daily-challenge
  /daily-challenge/start:
    post:
      consumes:
      - application/json
      description: Start today's daily challenge (one attempt per day)
      parameters:
      - description: Start request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.StartDailyChallengeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Challenge started
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.StartDailyChallengeResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Already played today
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Start daily challenge
      tags:
      - daily-challenge
  /daily-challenge/status:
    get:
      consumes:
      - application/json
      description: Get player's daily challenge status for today
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      - description: Date (YYYY-MM-DD, defaults to today)
        in: query
        name: date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Status
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetDailyStatusResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get daily status
      tags:
      - daily-challenge
  /daily-challenge/streak:
    get:
      consumes:
      - application/json
      description: Get player's daily streak information
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Streak info
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetPlayerStreakResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get player streak
      tags:
      - daily-challenge
  /duel/challenge:
    post:
      consumes:
      - application/json
      description: Send a direct challenge to a friend
      parameters:
      - description: Challenge request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.SendChallengeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Challenge sent
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.SendChallengeResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Friend busy
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Send friend challenge
      tags:
      - duel
  /duel/challenge/{challengeId}/respond:
    post:
      consumes:
      - application/json
      description: Accept or decline a friend challenge
      parameters:
      - description: Challenge ID
        in: path
        name: challengeId
        required: true
        type: string
      - description: Response request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.RespondChallengeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Response processed
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.RespondChallengeResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Challenge not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Challenge expired
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Respond to challenge
      tags:
      - duel
  /duel/challenge/link:
    post:
      consumes:
      - application/json
      description: Generate a shareable challenge link (24h valid)
      parameters:
      - description: Link request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.CreateChallengeLinkRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Link created
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.CreateChallengeLinkResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Create challenge link
      tags:
      - duel
  /duel/game/{gameId}/rematch:
    post:
      consumes:
      - application/json
      description: Request a rematch after a completed duel
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Rematch request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.RequestRematchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Rematch requested
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.RequestRematchResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Cannot rematch
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Request rematch
      tags:
      - duel
  /duel/history:
    get:
      consumes:
      - application/json
      description: Get player's duel game history with pagination
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      - description: Limit (default 20, max 100)
        in: query
        name: limit
        type: integer
      - description: Offset
        in: query
        name: offset
        type: integer
      - description: 'Filter: all, friends, wins, losses'
        in: query
        name: filter
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Game history
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetGameHistoryResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get game history
      tags:
      - duel
  /duel/leaderboard:
    get:
      consumes:
      - application/json
      description: Get leaderboard by type (seasonal, friends, referrals)
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      - description: 'Type: seasonal, friends, referrals (default seasonal)'
        in: query
        name: type
        type: string
      - description: Limit (default 10, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Leaderboard
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetLeaderboardResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get duel leaderboard
      tags:
      - duel
  /duel/queue/join:
    post:
      consumes:
      - application/json
      description: Enter random matchmaking queue
      parameters:
      - description: Join request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.JoinQueueRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Joined queue
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.JoinQueueResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Already in queue or game
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Join matchmaking queue
      tags:
      - duel
  /duel/queue/leave:
    delete:
      consumes:
      - application/json
      description: Cancel queue search (ticket refunded)
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Left queue
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.LeaveQueueResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Leave matchmaking queue
      tags:
      - duel
  /duel/status:
    get:
      consumes:
      - application/json
      description: Get player's duel status, MMR, pending challenges
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Status
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetDuelStatusResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get duel status
      tags:
      - duel
  /leaderboard:
    get:
      consumes:
      - application/json
      description: Get the global leaderboard across all quizzes (sum of best scores
        per quiz)
      parameters:
      - description: Number of entries to return (default 10, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Global leaderboard entries
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetGlobalLeaderboardResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get global leaderboard
      tags:
      - leaderboard
  /marathon/{gameId}:
    delete:
      consumes:
      - application/json
      description: Abandon an active marathon game. Game ends immediately and final
        statistics are returned.
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Abandon game request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.AbandonMarathonRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Game abandoned with final statistics
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.AbandonMarathonResponse'
        "400":
          description: Invalid game ID or game not in progress
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "401":
          description: Unauthorized - game belongs to another player
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Abandon a marathon game
      tags:
      - marathon
  /marathon/{gameId}/answer:
    post:
      consumes:
      - application/json
      description: Submit an answer for the current question. Returns next question
        or game over with continue offer.
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Submit answer request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitMarathonAnswerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Answer result with next question or game over details
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitMarathonAnswerResponse'
        "400":
          description: Invalid request, game not in progress, or wrong question
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "401":
          description: Unauthorized - game belongs to another player
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game, question, or answer not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Submit an answer in marathon mode
      tags:
      - marathon
  /marathon/{gameId}/bonus:
    post:
      consumes:
      - application/json
      description: 'Use a bonus for the current question. Available bonuses: shield
        (protect from wrong answer), fifty_fifty (remove 2 wrong answers), skip (skip
        question), freeze (+10 seconds)'
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Use bonus request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.UseMarathonBonusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Bonus result with remaining inventory
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.UseMarathonBonusResponse'
        "400":
          description: Invalid request, bonus not available, or wrong question
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "401":
          description: Unauthorized - game belongs to another player
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game or question not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Use a bonus in marathon mode
      tags:
      - marathon
  /marathon/{gameId}/continue:
    post:
      consumes:
      - application/json
      description: Pay coins or watch ad to continue playing after losing all lives.
        Resets lives to 1.
      parameters:
      - description: Game ID
        in: path
        name: gameId
        required: true
        type: string
      - description: Continue request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.ContinueMarathonRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Game resumed with 1 life
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ContinueMarathonResponse'
        "400":
          description: Invalid request or game not in game_over state
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "401":
          description: Unauthorized - game belongs to another player
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Game not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Continue a marathon game after game over
      tags:
      - marathon
  /marathon/leaderboard:
    get:
      consumes:
      - application/json
      description: Get the leaderboard for a specific category or all categories
      parameters:
      - description: Category ID (empty or 'all' for all categories)
        in: query
        name: categoryId
        type: string
      - description: 'Time frame: all_time (default), weekly, daily'
        in: query
        name: timeFrame
        type: string
      - description: Number of entries to return (default 10, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Leaderboard entries
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetMarathonLeaderboardResponse'
        "400":
          description: Invalid parameters
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get marathon leaderboard
      tags:
      - marathon
  /marathon/personal-bests:
    get:
      consumes:
      - application/json
      description: Get all personal best records for a player across all marathon
        categories
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Personal best records
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetPersonalBestsResponse'
        "400":
          description: Invalid player ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: No personal bests found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get personal best records
      tags:
      - marathon
  /marathon/start:
    post:
      consumes:
      - application/json
      description: Start a new marathon game session with adaptive difficulty and
        dynamic question loading
      parameters:
      - description: Start marathon request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.StartMarathonRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Marathon game started with first question
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.StartMarathonResponse'
        "400":
          description: Invalid request or player ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Active game already exists
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Start a marathon game
      tags:
      - marathon
  /marathon/status:
    get:
      consumes:
      - application/json
      description: Get the status of the player's active marathon game, if any exists
      parameters:
      - description: Player ID
        in: query
        name: playerId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Marathon game status
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetMarathonStatusResponse'
        "400":
          description: Invalid player ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get marathon game status
      tags:
      - marathon
  /quiz:
    get:
      consumes:
      - application/json
      description: Get a list of all available quizzes with basic information, optionally
        filtered by category.
      parameters:
      - description: Category ID to filter quizzes by
        in: query
        name: categoryId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of quizzes
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ListQuizzesResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: List all quizzes
      tags:
      - quiz
  /quiz/{id}:
    get:
      consumes:
      - application/json
      description: Get detailed quiz information including questions, answers (without
        correct answer indicators), and top 3 leaderboard scores
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Quiz details with questions and top scores
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetQuizDetailsResponse'
        "400":
          description: Invalid quiz ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Quiz not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get quiz details
      tags:
      - quiz
  /quiz/{id}/active-session:
    get:
      consumes:
      - application/json
      description: Retrieve the active quiz session for the current user and quiz
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      - description: User ID for authorization
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.GetActiveSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Active session with current question
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetActiveSessionResponse'
        "400":
          description: Invalid quiz or user ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: No active session found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get active quiz session
      tags:
      - quiz
  /quiz/{id}/leaderboard:
    get:
      consumes:
      - application/json
      description: Get the leaderboard for a specific quiz with top scores
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      - description: Number of entries to return (default 10)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Leaderboard entries
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetLeaderboardResponse'
        "400":
          description: Invalid quiz ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Quiz not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get quiz leaderboard
      tags:
      - quiz
  /quiz/{id}/start:
    post:
      consumes:
      - application/json
      description: Create a new quiz session for a user and return the first question
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      - description: Start quiz request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.StartQuizRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Quiz session started with first question
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.StartQuizResponse'
        "400":
          description: Invalid request or quiz ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Quiz not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "409":
          description: Active session already exists
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Start a quiz session
      tags:
      - quiz
  /quiz/daily:
    get:
      consumes:
      - application/json
      description: Get the quiz of the day with completion status. Same quiz for all
        users on the same date. Deterministic selection based on date. Requires authentication.
      produces:
      - application/json
      responses:
        "200":
          description: Daily quiz details with completion status
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetDailyQuizResponse'
        "401":
          description: Unauthorized - missing or invalid authentication
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: No quizzes available
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      security:
      - TelegramAuth: []
      summary: Get daily quiz
      tags:
      - quiz
  /quiz/random:
    get:
      consumes:
      - application/json
      description: Get a random quiz, optionally filtered by category
      parameters:
      - description: Category ID to filter quizzes by
        in: query
        name: categoryId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Random quiz details with questions
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetRandomQuizResponse'
        "404":
          description: No quizzes available
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get random quiz
      tags:
      - quiz
  /quiz/session/{sessionId}:
    delete:
      consumes:
      - application/json
      description: Delete an active quiz session, allowing the user to start fresh
      parameters:
      - description: Session ID
        in: path
        name: sessionId
        required: true
        type: string
      - description: User ID for authorization
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.AbandonSessionRequest'
      produces:
      - application/json
      responses:
        "204":
          description: Session abandoned successfully
        "400":
          description: Invalid session ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "401":
          description: Unauthorized - session belongs to another user
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Abandon a quiz session
      tags:
      - quiz
    get:
      consumes:
      - application/json
      description: Get detailed results for a quiz session including statistics and
        quiz info
      parameters:
      - description: Session ID
        in: path
        name: sessionId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Session results with statistics
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetSessionResultsResponse'
        "400":
          description: Invalid session ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get session results
      tags:
      - quiz
  /quiz/session/{sessionId}/answer:
    post:
      consumes:
      - application/json
      description: Submit an answer for a question in an active quiz session
      parameters:
      - description: Session ID
        in: path
        name: sessionId
        required: true
        type: string
      - description: Submit answer request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitAnswerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Answer result with correctness, points, and next question or
            final result
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.SubmitAnswerResponse'
        "400":
          description: Invalid request, session completed, or already answered
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "401":
          description: Unauthorized - user mismatch
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: Session, question, or answer not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Submit an answer
      tags:
      - quiz
  /user/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve user profile by Telegram user ID
      parameters:
      - description: User ID (Telegram ID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetUserResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get user by ID
      tags:
      - user
    put:
      consumes:
      - application/json
      description: Update user profile information
      parameters:
      - description: User ID (Telegram ID)
        in: path
        name: id
        required: true
        type: string
      - description: Updated profile data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_infrastructure_http_handlers.UpdateUserProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated user profile
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.UpdateUserProfileResponse'
        "400":
          description: Invalid request body or user ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Update user profile
      tags:
      - user
  /user/{userId}/sessions/active:
    get:
      consumes:
      - application/json
      description: Get all active (not completed) quiz sessions for a user. Used for
        "Continue Playing" feature.
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of active sessions
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetUserActiveSessionsResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get user's active quiz sessions
      tags:
      - quiz
  /user/by-username/{username}:
    get:
      consumes:
      - application/json
      description: Retrieve user profile by Telegram @username
      operationId: GetUserByUsername
      parameters:
      - description: Telegram username (without @)
        in: path
        name: username
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.GetUserResponse'
        "400":
          description: Invalid username
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: Get user by Telegram username
      tags:
      - user
  /user/register:
    post:
      consumes:
      - application/json
      description: Register a new user from Telegram Mini App or update existing user
        profile (idempotent). Requires valid Telegram init data in Authorization header.
      produces:
      - application/json
      responses:
        "200":
          description: User registered or updated
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.RegisterUserResponse'
        "401":
          description: Invalid or missing Telegram authorization
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      security:
      - TelegramAuth: []
      summary: Register or update user
      tags:
      - user
  /users:
    get:
      consumes:
      - application/json
      description: Get a paginated list of all users
      parameters:
      - description: Limit (default 50, max 100)
        in: query
        name: limit
        type: integer
      - description: Offset (default 0)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of users
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ListUsersResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_infrastructure_http_handlers.ErrorResponse'
      summary: List all users (Admin)
      tags:
      - user
schemes:
- http
- https
swagger: "2.0"
