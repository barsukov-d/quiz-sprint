basePath: /api/v1
definitions:
  handlers.AnswerDTO:
    properties:
      id:
        type: string
      position:
        type: integer
      text:
        type: string
    type: object
  handlers.ErrorDetail:
    properties:
      code:
        type: integer
      message:
        type: string
    type: object
  handlers.ErrorResponse:
    properties:
      error:
        $ref: '#/definitions/handlers.ErrorDetail'
    type: object
  handlers.FinalResultDTO:
    properties:
      correctCount:
        type: integer
      maxScore:
        type: integer
      passed:
        type: boolean
      percentage:
        type: integer
      questionsCount:
        type: integer
      totalScore:
        type: integer
    type: object
  handlers.GetLeaderboardResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/handlers.LeaderboardEntryDTO'
        type: array
    type: object
  handlers.GetQuizDetailsData:
    properties:
      quiz:
        $ref: '#/definitions/handlers.QuizDetailDTO'
      topScores:
        items:
          $ref: '#/definitions/handlers.LeaderboardEntryDTO'
        type: array
    type: object
  handlers.GetQuizDetailsResponse:
    properties:
      data:
        $ref: '#/definitions/handlers.GetQuizDetailsData'
    type: object
  handlers.LeaderboardEntryDTO:
    properties:
      completedAt:
        type: integer
      rank:
        type: integer
      score:
        type: integer
      userId:
        type: string
      username:
        type: string
    type: object
  handlers.ListQuizzesResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/handlers.QuizDTO'
        type: array
    type: object
  handlers.QuestionDTO:
    properties:
      answers:
        items:
          $ref: '#/definitions/handlers.AnswerDTO'
        type: array
      id:
        type: string
      points:
        type: integer
      position:
        type: integer
      text:
        type: string
    type: object
  handlers.QuizDTO:
    properties:
      createdAt:
        type: integer
      description:
        type: string
      id:
        type: string
      passingScore:
        type: integer
      questionsCount:
        type: integer
      timeLimit:
        type: integer
      title:
        type: string
    type: object
  handlers.QuizDetailDTO:
    properties:
      createdAt:
        type: integer
      description:
        type: string
      id:
        type: string
      passingScore:
        type: integer
      questions:
        items:
          $ref: '#/definitions/handlers.QuestionDTO'
        type: array
      timeLimit:
        type: integer
      title:
        type: string
    type: object
  handlers.SessionDTO:
    properties:
      completedAt:
        type: integer
      currentQuestion:
        type: integer
      id:
        type: string
      quizId:
        type: string
      score:
        type: integer
      startedAt:
        type: integer
      status:
        type: string
      userId:
        type: string
    type: object
  handlers.StartQuizData:
    properties:
      firstQuestion:
        $ref: '#/definitions/handlers.QuestionDTO'
      session:
        $ref: '#/definitions/handlers.SessionDTO'
      timeLimit:
        type: integer
      totalQuestions:
        type: integer
    type: object
  handlers.StartQuizRequest:
    properties:
      userId:
        type: string
    type: object
  handlers.StartQuizResponse:
    properties:
      data:
        $ref: '#/definitions/handlers.StartQuizData'
    type: object
  handlers.SubmitAnswerData:
    properties:
      correctAnswerId:
        type: string
      finalResult:
        $ref: '#/definitions/handlers.FinalResultDTO'
      isCorrect:
        type: boolean
      isQuizCompleted:
        type: boolean
      nextQuestion:
        $ref: '#/definitions/handlers.QuestionDTO'
      pointsEarned:
        type: integer
      totalScore:
        type: integer
    type: object
  handlers.SubmitAnswerRequest:
    properties:
      answerId:
        type: string
      questionId:
        type: string
      userId:
        type: string
    type: object
  handlers.SubmitAnswerResponse:
    properties:
      data:
        $ref: '#/definitions/handlers.SubmitAnswerData'
    type: object
host: localhost:3000
info:
  contact:
    email: support@quiz-sprint-tma.online
    name: API Support
    url: https://quiz-sprint-tma.online/support
  description: Quiz Sprint TMA Backend API - A Telegram Mini App for interactive quizzes
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: https://quiz-sprint-tma.online/terms
  title: Quiz Sprint API
  version: "1.0"
paths:
  /quiz:
    get:
      consumes:
      - application/json
      description: Get a list of all available quizzes with basic information
      produces:
      - application/json
      responses:
        "200":
          description: List of quizzes
          schema:
            $ref: '#/definitions/handlers.ListQuizzesResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: List all quizzes
      tags:
      - quiz
  /quiz/{id}:
    get:
      consumes:
      - application/json
      description: Get detailed quiz information including questions, answers (without
        correct answer indicators), and top 3 leaderboard scores
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Quiz details with questions and top scores
          schema:
            $ref: '#/definitions/handlers.GetQuizDetailsResponse'
        "400":
          description: Invalid quiz ID
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Quiz not found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Get quiz details
      tags:
      - quiz
  /quiz/{id}/leaderboard:
    get:
      consumes:
      - application/json
      description: Get the leaderboard for a specific quiz with top scores
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      - description: Number of entries to return (default 10)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Leaderboard entries
          schema:
            $ref: '#/definitions/handlers.GetLeaderboardResponse'
        "400":
          description: Invalid quiz ID
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Quiz not found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Get quiz leaderboard
      tags:
      - quiz
  /quiz/{id}/start:
    post:
      consumes:
      - application/json
      description: Create a new quiz session for a user and return the first question
      parameters:
      - description: Quiz ID
        in: path
        name: id
        required: true
        type: string
      - description: Start quiz request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.StartQuizRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Quiz session started with first question
          schema:
            $ref: '#/definitions/handlers.StartQuizResponse'
        "400":
          description: Invalid request or quiz ID
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Quiz not found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "409":
          description: Active session already exists
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Start a quiz session
      tags:
      - quiz
  /quiz/session/{sessionId}/answer:
    post:
      consumes:
      - application/json
      description: Submit an answer for a question in an active quiz session
      parameters:
      - description: Session ID
        in: path
        name: sessionId
        required: true
        type: string
      - description: Submit answer request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.SubmitAnswerRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Answer result with correctness, points, and next question or
            final result
          schema:
            $ref: '#/definitions/handlers.SubmitAnswerResponse'
        "400":
          description: Invalid request, session completed, or already answered
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "401":
          description: Unauthorized - user mismatch
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "404":
          description: Session, question, or answer not found
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/handlers.ErrorResponse'
      summary: Submit an answer
      tags:
      - quiz
schemes:
- http
- https
swagger: "2.0"
